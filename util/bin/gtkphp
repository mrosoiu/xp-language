#!/bin/sh

EXE='php'
IFS=

echo "<?php
  require('lang.base.php');
  uses('util.cmd.ParamString');
  
  require('$1');
  
  \$p= &new ParamString(explode('', '$*'));
  if ('.class.php' == substr('$1', -10)) {
    \$class= basename(substr('$1', 0, -10));
    try(); {
      \$app= &new \$class(\$p); 
      \$app->init(\$p);
    } if (catch('GuiException', \$e)) {
      \$e->printStackTrace();
      exit(-1);
    }
    \$app->run();
    \$app->done();
  }
?>" | ${EXE} -q -C -c /usr/local/etc/php.gtk
