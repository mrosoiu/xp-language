RFC 0057: util.adt extensions
========================================================================
$Id$

@authors: friebe
@created: Sun Apr 30 12:24:40     2006
@status: draft
@category: util.adt

Scope of Change
---------------
The package util.adt will be changed and extended to contain generic
classes and interfaces to replace PHP's array-functions for objects.


Rationale
---------
PHP's array-functionality doesn't deal with objects very well.
Especially, object equality isn't redefineable.


Functionality
-------------

Quick overview
~~~~~~~~~~~~~~

The following classes will be changed:
* util.adt.Stack
* util.adt.Set
* util.adt.HashSet
* util.adt.Queue
* util.adt.LRUBuffer

The following classes will be added:
* util.adt.HashTable

The following utility classes and interfaces will be added:
* util.adt.HashImplementation
* util.adt.DJBX33AHashImplementation
* util.adt.HashProvider
* util.adt.Map


Extensions to existing classes
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The classes util.adt.Stack, util.adt.HashSet and util.adt.Queue
will be extended by hashCode() and equals() methods. 

The interface util.adt.Set will be extended to contain the methods
hashCode() and equals().


Changes to existing classes
~~~~~~~~~~~~~~~~~~~~~~~~~~~
The class util.adt.LRUBuffer will be changed to work with objects
instead of primitives. This results in a BC break but will make the
class consistent with the rest of the classes in this package.


New classes
~~~~~~~~~~~
The util.adt.HashTable class will be added. It is a hash table 
consisting of non-null objects as keys and values and implements
the new util.adt.Map interface.

The util.adt.HashProvider class serves as the entry-level class for
all classes using hashing. It is a singleton and knows about one
single (changeable) implementation defaulting to "DJBX33A" (Daniel 
J. Bernstein, Times 33 with Addition) implemented in the class
util.adt.DJBX33AHashImplementation.


Interfaces
~~~~~~~~~~
The util.adt package comes with two interfaces, Set and Map, which
define the behaviour of the HashSet and HashTable classes. Future 
extensions such as a IdentityHashMap, a revised version of the current
util.HashMap or IdentitySet should implement these interface.


Security considerations
-----------------------
n/a


Speed impact
------------
n/a


Dependencies
------------
- BC: The LRUBuffer class will no longer support primitives


Related documents
-----------------
- http://xp-framework.net/downloads/adt.diff
  Patch implementing this RFC

- http://javadoc.xp-framework.net/guide/collections/index.html
  The Java[TM] Collections Framework

- http://msdn.microsoft.com/library/default.asp?url=/library/en-us/cpref/html/frlrfsystemcollections.asp
  .NET Framework Class Library / System.Collections Namespace

Comments
--------
- friebe, Sun Apr 30 12:33:32     2006
  Maybe the lang.Collection and util.HashMap classes should be migrated
  here, too.

- friebe, Sun Apr 30 12:48:02     2006
  The patch contains a set of unit tests (in a new package named
  net.xp_framework.util.adt) to verify the classes' behaviour.

<EOF>
